# Prompt 11: The Big One â€” Workspace Overhaul + Terminal Tabs + Claude Monitor

## MISSION

Major upgrade to ProjectStats workspace. This prompt covers: vertical terminal tabs with status indicators, file browser improvements, tab enhancements, Claude Code usage monitoring, git controls, and database bulk import. Make this app feel like a proper native macOS development environment.

---

## SCOPE A: Vertical Terminal Tabs System

### Layout

Replace the current terminal panel with a tabbed terminal system. Tabs are VERTICAL, on the RIGHT side of the terminal area:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚                                 â”‚ [T] â”‚ â† Terminal (default, always first)
â”‚                                 â”œâ”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚ [C] â”‚ â† Claude session
â”‚      Terminal Output Area       â”‚ ğŸ”„  â”‚   (with status indicator)
â”‚                                 â”œâ”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚ [Y] â”‚ â† ccYOLO session  
â”‚                                 â”œâ”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚ [D] â”‚ â† Dev server (npm run dev)
â”‚                                 â”‚ :3000â”‚   (shows port)
â”‚                                 â”œâ”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚ [+] â”‚ â† Add new tab
â”‚                                 â”‚     â”‚
â”‚                                 â”‚     â”‚
â”‚                                 â”œâ”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚ (i) â”‚ â† Running servers info
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
```

### Tab Types

**1. Default Terminal Tab**
- Always present, cannot be closed
- Just a plain zsh shell in the project directory
- Icon: `terminal` or `T`

**2. Claude Tab**
- Created when clicking [claude] button
- Runs `claude` command
- Icon: `C` or Claude logo
- Status indicators (see below)

**3. ccYOLO Tab**
- Created when clicking [ccYOLO] button  
- Runs `claude --dangerously-skip-permissions` (or whatever the YOLO command is)
- Icon: `Y` or flame icon
- Same status indicators as Claude tab

**4. Dev Server Tab**
- Created from [+] menu
- Shows a toolbar with common dev commands:
  - `npm run dev`
  - `npm start`
  - `yarn dev`
  - `npx prisma studio`
  - `python manage.py runserver`
  - Custom command input
- Auto-detects port from output (parse "localhost:3000" or "ready on port 3000")
- Tab shows the port number when running
- Click tab â†’ copies `http://localhost:{port}` to clipboard
- Ctrl+click tab â†’ opens URL in default browser

### Tab Behaviors

**Hover behavior:**
- Tab slides out horizontally to reveal full name + stats
- Collapsed: just icon (T, C, Y, D)
- Expanded on hover shows:
  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Claude                  â”‚
  â”‚ Context: 67% (134k/200k)â”‚
  â”‚ Status: Working...      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```
  For dev server tabs:
  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Dev Server              â”‚
  â”‚ npm run dev             â”‚
  â”‚ localhost:3000          â”‚
  â”‚ Running: 45 min         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

**Status indicators for Claude/ccYOLO tabs:**
- ğŸ”„ **Spinning/animated arrow** = Claude is working (processing)
- ğŸŸ¢ **Green dot** = idle, ready for input
- ğŸ”´ **Red dot** = error state
- ğŸŸ¡ **Yellow badge (top-right notification style)** = finished task, needs attention

Detect status by watching terminal output:
- Working: seeing streaming output, "Thinking...", tool calls
- Idle: prompt is showing (`>` or `>>`)
- Finished: output stopped + prompt visible + new since last interaction

**Tab actions:**
- Click = switch to that tab
- Right-click = context menu:
  - Rename
  - Duplicate
  - Clear output
  - Kill process
  - Close (except default terminal)

### Running Servers Indicator

The `(i)` button at bottom of tab strip:
- Shows count of running dev servers: `(i) 3`
- Hover/click shows popover with list:
  ```
  Running Servers:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ğŸ“¦ npm run dev     â†’ localhost:3000
  ğŸ“¦ npx prisma      â†’ localhost:5555  
  ğŸ python manage   â†’ localhost:8000
  ```
- Click any row to copy that URL
- Ctrl+click to open in browser

### Keyboard Shortcuts

- `Cmd+1` = Switch to Terminal tab
- `Cmd+2` = Switch to second tab (Claude)
- `Cmd+3` = Switch to third tab
- etc.
- `Cmd+T` = New dev server tab
- `Cmd+W` = Close current terminal tab (except default)
- `Cmd+K` = Clear current terminal output
- `Cmd+Shift+C` = Copy localhost URL (if dev server tab)

### Command History

Each tab maintains last 10 commands run. Show dropdown or popover:
- Hover on tab â†’ shows recent commands
- Or add a small history icon in the tab toolbar

---

## SCOPE B: File Browser Enhancements

### Toolbar

Add toolbar above file tree:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ“„+] [ğŸ“+] [ğŸ”„] [ğŸ‘] [â·] [ğŸ“ Update]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ projectStats                         â”‚
â”‚   ğŸ“ Models                             â”‚
â”‚   ...                                   â”‚
```

**Buttons:**
1. **[ğŸ“„+] New File** â€” create file in selected folder or root
2. **[ğŸ“+] New Folder** â€” create folder in selected folder or root
3. **[ğŸ”„] Refresh** â€” re-scan file tree + update line count
4. **[ğŸ‘] Toggle Hidden** â€” show/hide dotfiles (.env, .gitignore, .claude)
5. **[â·] Collapse All** â€” collapse all expanded folders
6. **[ğŸ“ Update Docs]** â€” spawn Claude in ghost tab to update README/docs (see Scope G)

### Context Menu (Right-click)

Right-click on any file/folder:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rename                  â”‚
â”‚ Copy                    â”‚
â”‚ Paste                   â”‚
â”‚ Duplicate               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Delete                  â”‚ (moves to Trash)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Reveal in Finder        â”‚
â”‚ Open in VS Code         â”‚
â”‚ Open in Xcode           â”‚
â”‚ Open in Terminal        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Copy Path               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Additional options for .env files:**
```
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Import to Env Manager   â”‚
â”‚ Push Values to Keychain â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Push to Keychain format:** `{projectName}:{KEY_NAME}`
Example: `projectStats:OPENAI_API_KEY`

### Hidden Files Toggle

- `@AppStorage("showHiddenFiles") var showHiddenFiles = false`
- When ON: show all files including `.env`, `.gitignore`, `.claude/`, etc.
- When OFF: hide files/folders starting with `.`
- Button icon changes to indicate state

---

## SCOPE C: Project Tabs Enhancements

### Fix Stale Line Count

**Problem:** Line count shows ~6k when actual is ~10k. The app reads from `projectstats.json` cache instead of fresh count.

**Fix:** In `ProjectScanner.swift` or wherever `lineCount` is set:
```swift
// Always compute fresh, don't use JSON cache for line count
let (freshLines, _) = LineCounter.countLines(in: projectPath)
project.lineCount = freshLines
```

### Stats Refresh on Tab Events

**On tab switch:**
```swift
.onChange(of: selectedTab) { oldTab, newTab in
    if case .projectWorkspace(let path) = newTab.content {
        Task { await DashboardViewModel.shared.syncSingleProject(path: path) }
    }
}
```

**On tab close:**
```swift
func closeTab(_ tab: AppTab) {
    if case .projectWorkspace(let path) = tab.content {
        Task { await DashboardViewModel.shared.syncSingleProject(path: path) }
    }
    // existing close logic
}
```

### Tab Hover Tooltip

Hover over project tab for 1 second â†’ show tooltip:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ projectStats               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ğŸ“Š 9,847 lines             â”‚
â”‚ ğŸ“ 58 commits              â”‚
â”‚ ğŸ”¨ abc1234 (2h ago)        â”‚
â”‚ ğŸ’» Swift                   â”‚
â”‚ â­ Favorited               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Favorite Star on Tabs

- Show star icon on tab (â˜† unfavorited, â­ favorited)
- Click to toggle
- Persist in `TabManagerViewModel` or `@AppStorage`
- Optional: favorited tabs sort first

### Native Tab Styling

Current tabs look like buttons. Make them look like proper macOS tabs:
- Connected visually (no gaps between tabs)
- Selected tab appears raised/connected to content
- Rounded top corners, flat bottom
- Close button (Ã—) appears on hover
- Subtle shadows/borders

Reference: Safari tabs, Finder tabs, or Xcode tabs

### Tab Context Menu (Right-click)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â­ Favorite             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ Update Docs          â”‚ â† Spawns doc updater
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Duplicate Tab           â”‚
â”‚ Close Tab               â”‚
â”‚ Close Other Tabs        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SCOPE D: Claude Usage Monitor (Plan Limits + Context)

### Data Sources

**1. Plan Usage Limits (from Anthropic API)**

Claude Code uses an undocumented OAuth endpoint to fetch plan usage. This is the SAME data shown in claude.ai Settings:

```
GET https://api.anthropic.com/api/oauth/usage
Headers:
  Authorization: Bearer {oauth_token}
  anthropic-beta: oauth-2025-04-20
  User-Agent: claude-code/2.0.31
  Content-Type: application/json
```

Response:
```json
{
  "five_hour": {
    "utilization": 0.30,
    "resets_at": "2026-02-03T08:50:00Z"
  },
  "seven_day": {
    "utilization": 0.16,
    "resets_at": "2026-02-09T19:59:00Z"
  }
}
```

**Getting the OAuth token:**
The token is stored in macOS Keychain under "Claude Code-credentials":
```swift
func getClaudeOAuthToken() -> String? {
    let query: [String: Any] = [
        kSecClass as String: kSecClassGenericPassword,
        kSecAttrService as String: "Claude Code-credentials",
        kSecReturnData as String: true,
        kSecMatchLimit as String: kSecMatchLimitOne
    ]
    
    var result: AnyObject?
    let status = SecItemCopyMatching(query as CFDictionary, &result)
    
    guard status == errSecSuccess,
          let data = result as? Data,
          let json = try? JSONSerialization.jsonObject(with: data) as? [String: Any],
          let oauth = json["claudeAiOauth"] as? [String: Any],
          let token = oauth["accessToken"] as? String else {
        return nil
    }
    
    return token
}
```

**2. Context Window Usage (from transcript files)**

For per-session context tracking, parse `~/.claude/projects/{project-hash}/` transcript files:
```swift
// Find most recent JSONL entry with usage data
// Extract: input_tokens + cache_read_input_tokens + cache_creation_input_tokens
// Calculate: total / 200000 * 100 = context percentage
```

### UI Location 1: Home Tab / Dashboard

Add a Claude Usage card showing plan limits (matching the claude.ai settings page design):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– Plan Usage Limits                                    [Refresh] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Current Session                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                  30% used  â”‚
â”‚  Resets in 2 hr 50 min                                              â”‚
â”‚                                                                     â”‚
â”‚  Weekly Limits                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚
â”‚                                                                     â”‚
â”‚  All models                                                         â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                  16% used  â”‚
â”‚  Resets Sun 1:59 PM                                                 â”‚
â”‚                                                                     â”‚
â”‚  Sonnet only                                                        â”‚
â”‚  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                   0% used  â”‚
â”‚  Resets Sun 4:59 PM                                                 â”‚
â”‚                                                                     â”‚
â”‚  Last updated: just now                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### UI Location 2: Context Usage Bar (Terminal Panel)

Display above terminal for per-session context AND plan usage:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Plan: 30% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  (2h 50m)  â”‚  Context: 45%  89k/200k    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Color coding:**
- 0-50%: Green
- 50-75%: Yellow  
- 75-90%: Orange
- 90%+: Red

### Implementation

**Create `ClaudePlanUsageService.swift`:**
```swift
import Foundation
import Security

@MainActor
class ClaudePlanUsageService: ObservableObject {
    static let shared = ClaudePlanUsageService()
    
    @Published var fiveHourUtilization: Double = 0
    @Published var fiveHourResetsAt: Date?
    @Published var sevenDayUtilization: Double = 0
    @Published var sevenDayResetsAt: Date?
    @Published var lastUpdated: Date?
    @Published var isLoading = false
    @Published var error: String?
    
    var fiveHourTimeRemaining: String {
        guard let resetDate = fiveHourResetsAt else { return "â€”" }
        let interval = resetDate.timeIntervalSinceNow
        if interval <= 0 { return "Now" }
        let hours = Int(interval) / 3600
        let minutes = (Int(interval) % 3600) / 60
        if hours > 0 {
            return "\(hours)h \(minutes)m"
        }
        return "\(minutes)m"
    }
    
    func fetchUsage() async {
        guard let token = getClaudeOAuthToken() else {
            error = "No Claude credentials found"
            return
        }
        
        isLoading = true
        defer { isLoading = false }
        
        var request = URLRequest(url: URL(string: "https://api.anthropic.com/api/oauth/usage")!)
        request.httpMethod = "GET"
        request.setValue("Bearer \(token)", forHTTPHeaderField: "Authorization")
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")
        request.setValue("oauth-2025-04-20", forHTTPHeaderField: "anthropic-beta")
        request.setValue("ProjectStats/1.0", forHTTPHeaderField: "User-Agent")
        
        do {
            let (data, _) = try await URLSession.shared.data(for: request)
            let json = try JSONSerialization.jsonObject(with: data) as? [String: Any]
            
            if let fiveHour = json?["five_hour"] as? [String: Any] {
                fiveHourUtilization = fiveHour["utilization"] as? Double ?? 0
                if let resetStr = fiveHour["resets_at"] as? String {
                    fiveHourResetsAt = ISO8601DateFormatter().date(from: resetStr)
                }
            }
            
            if let sevenDay = json?["seven_day"] as? [String: Any] {
                sevenDayUtilization = sevenDay["utilization"] as? Double ?? 0
                if let resetStr = sevenDay["resets_at"] as? String {
                    sevenDayResetsAt = ISO8601DateFormatter().date(from: resetStr)
                }
            }
            
            lastUpdated = Date()
            error = nil
        } catch {
            self.error = error.localizedDescription
        }
    }
    
    private func getClaudeOAuthToken() -> String? {
        let query: [String: Any] = [
            kSecClass as String: kSecClassGenericPassword,
            kSecAttrService as String: "Claude Code-credentials",
            kSecReturnData as String: true,
            kSecMatchLimit as String: kSecMatchLimitOne
        ]
        
        var result: AnyObject?
        let status = SecItemCopyMatching(query as CFDictionary, &result)
        
        guard status == errSecSuccess,
              let data = result as? Data,
              let json = try? JSONSerialization.jsonObject(with: data) as? [String: Any],
              let oauth = json["claudeAiOauth"] as? [String: Any],
              let token = oauth["accessToken"] as? String else {
            return nil
        }
        
        return token
    }
}
```

**Create `ClaudeUsageCard.swift` for Home/Dashboard:**
- Shows all three progress bars (current session, all models, sonnet)
- Refresh button
- "Last updated" timestamp
- Auto-refresh every 5 minutes when visible

**Create `ContextUsageBar.swift` for Terminal Panel:**
- Compact bar showing plan % and context %
- Color coded progress bars

**Wire up:**
- Fetch usage on app launch
- Refresh when workspace opens
- Auto-refresh periodically (every 5 min)
- Manual refresh button

---

## SCOPE E: Git Controls

### Toolbar Buttons

Add to workspace toolbar (top right area):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ < Projects  â— projectStats  ğŸŒ¿ main     [Commit â–¼] [Push] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**[Commit â–¼] dropdown:**
- Shows changed files count: "Commit (5 files)"
- Click â†’ opens commit dialog

**Commit Dialog:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Commit Changes                     [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Message:                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Fix stale line count bug           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ Changed files (5):                      â”‚
â”‚ â˜‘ M Models/Project.swift               â”‚
â”‚ â˜‘ M ViewModels/DashboardViewModel.swiftâ”‚
â”‚ â˜‘ A Services/ClaudeUsageMonitor.swift  â”‚
â”‚ â˜‘ M Views/IDE/FileBrowserView.swift    â”‚
â”‚ â˜‘ D OldFile.swift                      â”‚
â”‚                                         â”‚
â”‚        [Cancel]  [Commit]  [Commit & Push] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**[Push] button:**
- Shows pending commits count if any
- Click â†’ pushes to remote
- Shows success/failure toast

**Additional git actions (in dropdown or menu):**
- Pull
- Create Branch
- Switch Branch (shows branch list)
- Create PR (opens GitHub PR page in browser)
- Stash / Stash Pop

---

## SCOPE F: "Open In" Dropdown

Add "Open" dropdown to workspace toolbar:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Open In         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’» VS Code      â”‚
â”‚ ğŸ“ Cursor       â”‚
â”‚ ğŸ”¨ Xcode        â”‚
â”‚ ğŸ“ Finder       â”‚
â”‚ ğŸ–¥ Terminal     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ Copy Path    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation:**
```swift
// VS Code
NSWorkspace.shared.open([projectURL], withApplicationAt: vsCodeURL, configuration: config)

// Or via command line
Shell.execute("code '\(projectPath)'")

// Finder
NSWorkspace.shared.selectFile(nil, inFileViewerRootedAtPath: projectPath)

// Terminal
Shell.execute("open -a Terminal '\(projectPath)'")
```

---

## SCOPE G: Auto Doc Updater

### Trigger

- Button in file browser toolbar: [ğŸ“ Update Docs]
- Or right-click on project tab â†’ "Update Docs"

### Behavior

1. Click button
2. Spawns a new terminal tab (ghost tab) named "Doc Update"
3. Auto-runs command:
   ```
   claude "Read the current README.md, CHANGELOG.md, and codebase structure. Update the documentation to accurately reflect the current state. Be concise and accurate."
   ```
4. Claude updates the docs
5. Tab shows completion status (green dot + yellow badge)
6. User can review changes in git diff
7. Tab auto-closes after 30 seconds of inactivity (or stays if errors)

### Ghost Tab Behavior

- Clearly marked as "background task"
- Doesn't steal focus
- Shows spinner while working
- Notification when done (if enabled in settings)

---

## SCOPE H: .claude Folder Manager

### Access

- Button in workspace toolbar: [âš™ï¸ Claude Config]
- Or: Settings â†’ Claude Configuration
- Opens as a **popover or sheet**, not a separate window

### UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Claude Configuration                               [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ ğŸ“„ CLAUDE.md                              [Edit] [New]  â”‚
â”‚    Project instructions for Claude Code                 â”‚
â”‚    Last modified: 2 hours ago                           â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ commands/                                            â”‚
â”‚    â”œâ”€â”€ review.md        "Code review"      [Edit] [Ã—]  â”‚
â”‚    â”œâ”€â”€ test.md          "Generate tests"   [Edit] [Ã—]  â”‚
â”‚    â””â”€â”€ [+ Add Command]                                  â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ hooks/                                               â”‚
â”‚    â””â”€â”€ (empty)                            [+ Add Hook]  â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš™ï¸ settings.json                               [Edit]   â”‚
â”‚    model: claude-sonnet-4                              â”‚
â”‚    permissions: ask                                     â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”Œ MCP Servers                                 [Edit]   â”‚
â”‚    â€¢ github (enabled)                                   â”‚
â”‚    â€¢ filesystem (enabled)                               â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Templates:  [Swift/iOS] [Next.js] [Python] [Custom]     â”‚
â”‚                                                         â”‚
â”‚ Apply a template to generate CLAUDE.md boilerplate      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Features

- **Create .claude folder** if it doesn't exist
- **Edit CLAUDE.md** â€” opens in a nice editor (could be inline or in main content area)
- **Manage commands** â€” add/edit/delete custom slash commands
- **Manage hooks** â€” pre/post action hooks
- **Edit settings** â€” model picker, permission toggles
- **Templates** â€” pre-built CLAUDE.md templates for different project types

---

## SCOPE I: Settings â€” Bulk Database Import

### Location

Settings â†’ Data â†’ "Scan Working Folder"

### UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Data Management                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ Working Folder: ~/Code                      [Change]    â”‚
â”‚                                                         â”‚
â”‚ [ğŸ” Scan & Import All Projects]                         â”‚
â”‚                                                         â”‚
â”‚ This will scan your working folder for:                 â”‚
â”‚ â€¢ projectstats.json files                               â”‚
â”‚ â€¢ /prompts/*.md files                                   â”‚
â”‚ â€¢ /work/*.md files                                      â”‚
â”‚ And import them into the database.                      â”‚
â”‚                                                         â”‚
â”‚ Last scan: Never                                        â”‚
â”‚ Projects found: --                                      â”‚
â”‚ Prompts imported: --                                    â”‚
â”‚ Work logs imported: --                                  â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ—‘ Clear Database]                                      â”‚
â”‚ Warning: This will remove all cached data.              â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Implementation

```swift
func scanWorkingFolder() async {
    let workingFolder = URL(fileURLWithPath: "~/Code").expandingTildeInPath
    let fm = FileManager.default
    
    guard let enumerator = fm.enumerator(at: workingFolder, includingPropertiesForKeys: [.isDirectoryKey]) else { return }
    
    var projectsFound = 0
    var promptsImported = 0
    var workLogsImported = 0
    
    while let url = enumerator.nextObject() as? URL {
        // Look for projectstats.json
        if url.lastPathComponent == "projectstats.json" {
            let projectDir = url.deletingLastPathComponent()
            
            // Import project
            await importProject(from: projectDir)
            projectsFound += 1
            
            // Import prompts
            let promptsDir = projectDir.appendingPathComponent("prompts")
            promptsImported += await importPrompts(from: promptsDir, projectPath: projectDir.path)
            
            // Import work logs
            let workDir = projectDir.appendingPathComponent("work")
            workLogsImported += await importWorkLogs(from: workDir, projectPath: projectDir.path)
            
            // Skip descending into this project
            enumerator.skipDescendants()
        }
    }
    
    // Update UI with results
}
```

---

## SCOPE J: Notifications Settings

### Location

Settings â†’ Notifications

### UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Notifications                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ â˜‘ Show notification when Claude finishes                â”‚
â”‚ â˜‘ Play sound when Claude finishes                       â”‚
â”‚   Sound: [Ping â–¼]                                       â”‚
â”‚                                                         â”‚
â”‚ â˜‘ Show notification when build completes                â”‚
â”‚ â˜‘ Show notification when dev server starts              â”‚
â”‚                                                         â”‚
â”‚ â˜ Push notifications to phone (requires setup)          â”‚
â”‚   Service: [ntfy.sh â–¼]                                  â”‚
â”‚   Topic: [projectstats-caleb]                           â”‚
â”‚   [Test Notification]                                   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Implementation

```swift
func sendNotification(title: String, message: String) {
    // Local notification
    let notification = NSUserNotification()
    notification.title = title
    notification.informativeText = message
    notification.soundName = settings.notificationSound
    NSUserNotificationCenter.default.deliver(notification)
    
    // Push notification (if enabled)
    if settings.pushNotificationsEnabled {
        Task {
            await sendPushNotification(title: title, message: message)
        }
    }
}

func sendPushNotification(title: String, message: String) async {
    // Using ntfy.sh
    var request = URLRequest(url: URL(string: "https://ntfy.sh/\(settings.ntfyTopic)")!)
    request.httpMethod = "POST"
    request.setValue(title, forHTTPHeaderField: "Title")
    request.httpBody = message.data(using: .utf8)
    try? await URLSession.shared.data(for: request)
}
```

---

## VERIFICATION CHECKLIST

### Terminal Tabs
- [ ] Vertical tabs on right side of terminal
- [ ] Default terminal tab (cannot close)
- [ ] Claude tab with status indicators (spinning, green, yellow badge)
- [ ] ccYOLO tab with same indicators
- [ ] Dev server tab with port display
- [ ] Hover expands tab to show name
- [ ] Click dev tab copies localhost URL
- [ ] Ctrl+click opens in browser
- [ ] [+] button shows dev command options
- [ ] (i) button shows all running servers
- [ ] Right-click context menu on tabs
- [ ] Keyboard shortcuts work

### File Browser
- [ ] Toolbar with all buttons
- [ ] New File creates file
- [ ] New Folder creates folder
- [ ] Refresh updates tree + line count
- [ ] Toggle Hidden shows/hides dotfiles
- [ ] Collapse All works
- [ ] Update Docs button spawns Claude
- [ ] Right-click context menu works
- [ ] .env files have import/keychain options

### Project Tabs
- [ ] Line count shows fresh value (not cached)
- [ ] Tab switch refreshes stats
- [ ] Tab close refreshes stats
- [ ] Hover tooltip shows stats
- [ ] Favorite star toggles
- [ ] Tabs look like native macOS tabs
- [ ] Right-click menu works

### Claude Usage Monitor
- [ ] Plan usage card on Home/Dashboard shows 5-hour and weekly limits
- [ ] Progress bars match claude.ai settings page design
- [ ] OAuth token successfully read from Keychain
- [ ] API call to /api/oauth/usage works
- [ ] Reset times display correctly (e.g., "2h 50m", "Sun 1:59 PM")
- [ ] Context bar displays in terminal panel
- [ ] Percentage updates in real-time for context
- [ ] Colors change based on usage level
- [ ] Auto-refresh every 5 minutes
- [ ] Manual refresh button works

### Git Controls
- [ ] Commit button shows dialog
- [ ] Can commit with message
- [ ] Commit & Push works
- [ ] Push button works
- [ ] Branch display is accurate

### Open In
- [ ] VS Code opens project
- [ ] Xcode opens project
- [ ] Finder opens project folder
- [ ] Terminal opens in project
- [ ] Copy Path works

### .claude Manager
- [ ] Opens as popover/sheet
- [ ] Can create .claude folder
- [ ] Can edit CLAUDE.md
- [ ] Can add/edit commands
- [ ] Templates work

### Settings
- [ ] Scan Working Folder imports all projects
- [ ] Notification settings save
- [ ] Push notifications work (if configured)

### Resizable Columns
- [ ] Columns are draggable/resizable
- [ ] Layout is Terminal | Explorer | Viewer (left to right)
- [ ] Column widths persist across sessions
- [ ] Minimum widths are enforced
- [ ] Double-click divider resets to default width
- [ ] Keyboard shortcuts toggle column visibility

---

## FILE SUMMARY

**New files:**
- `Services/ClaudePlanUsageService.swift` â€” fetches plan limits from Anthropic OAuth API
- `Services/ClaudeContextMonitor.swift` â€” monitors per-session context from transcripts
- `Views/Dashboard/ClaudeUsageCard.swift` â€” usage card for Home tab
- `Views/IDE/ContextUsageBar.swift` â€” compact bar for terminal panel
- `Views/IDE/TerminalTabBar.swift`
- `Views/IDE/TerminalTabView.swift`
- `Views/IDE/DevServerTab.swift`
- `Views/IDE/RunningServersPopover.swift`
- `Views/Settings/NotificationSettings.swift`
- `Views/Settings/DataManagementView.swift`
- `Views/Claude/ClaudeConfigSheet.swift`
- `Views/Git/CommitDialog.swift`
- `Views/Git/GitControlsView.swift`

**Modified files:**
- `Views/IDE/TerminalPanelView.swift` â€” complete overhaul for tabbed terminals
- `Views/IDE/FileBrowserView.swift` â€” toolbar, context menu, hidden toggle
- `Views/IDE/IDEModeView.swift` â€” new column layout with HSplitView
- `Views/TabBar/TabBarView.swift` â€” styling, tooltips, favorites, context menu
- `Views/TabBar/TabShellView.swift` â€” tab events, git controls, open in
- `Views/TabBar/WorkspaceView.swift` â€” wire up all new features, column layout
- `ViewModels/TabManagerViewModel.swift` â€” favorites persistence
- `ViewModels/DashboardViewModel.swift` â€” bulk import, fix line count
- `Views/Settings/SettingsView.swift` â€” new sections

---

## SCOPE K: Resizable & Rearrangeable Columns

### New Layout

Change the workspace layout from the current arrangement to:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [< Projects]  [â­ projectStats]  [ğŸ“ other]              [Open â–¼] [Git â–¼]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                               â”‚ [T]   â”‚ ğŸ“ src  â”‚                           â”‚
â”‚                               â”‚ [C] ğŸ”„â”‚ ğŸ“ lib  â”‚   // FileViewer.swift     â”‚
â”‚                               â”‚ [Y]   â”‚ ğŸ“„ app  â”‚                           â”‚
â”‚      TERMINAL (wide)          â”‚ [D]   â”‚ ğŸ“„ pkg  â”‚   CODE / PREVIEW          â”‚
â”‚                               â”‚ :3000 â”‚         â”‚                           â”‚
â”‚      claude is working...     â”‚ [+]   â”‚         â”‚   (wide)                  â”‚
â”‚                               â”‚       â”‚         â”‚                           â”‚
â”‚                               â”‚ (i)   â”‚         â”‚                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Context: 45%   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  89k / 200k                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LEFT: Terminal (wide) + vertical terminal tabs on right edge
MIDDLE: File Explorer (thin)
RIGHT: File Viewer / Code Editor (wide)
```

### Resizable Columns

Use `HSplitView` (or `NSSplitView` wrapper for more control) to create draggable dividers between columns:

```swift
HSplitView {
    // Left: Terminal + its vertical tab bar
    HStack(spacing: 0) {
        TerminalContentView()
        VerticalTerminalTabBar()
            .frame(width: 44) // Fixed width for tab bar
    }
    .frame(minWidth: 300)
    
    // Middle: File explorer (thin)
    FileBrowserView()
        .frame(minWidth: 150, idealWidth: 200, maxWidth: 350)
    
    // Right: File viewer / code editor
    FileViewerView()
        .frame(minWidth: 300)
}
```

### Persist Column Widths

Save user's preferred widths:

```swift
@AppStorage("workspace.terminalWidth") var terminalWidth: Double = 450
@AppStorage("workspace.explorerWidth") var explorerWidth: Double = 200
@AppStorage("workspace.viewerWidth") var viewerWidth: Double = 450
```

### Column Visibility Toggles

Add keyboard shortcuts and menu items to show/hide columns:

- `Cmd+1` â€” Toggle Terminal
- `Cmd+2` â€” Toggle Explorer  
- `Cmd+3` â€” Toggle File Viewer
- Or: `Cmd+B` â€” Toggle Sidebar (Explorer)

When a column is hidden, the others expand to fill the space.

### Double-click Divider

Double-clicking a divider resets that column to its default/ideal width.

### Minimum Widths

- Terminal: 300px minimum (needs space for code output)
- Explorer: 150px minimum (just file names)
- File Viewer: 300px minimum (needs space for code)

---

## NOTES

- This is a large prompt. Consider breaking into multiple commits by scope (A, B, C, etc.)
- Test terminal tab switching thoroughly â€” multiple SwiftTerm instances can be memory-intensive
- The Claude transcript path parsing may need refinement based on actual Claude Code file structure
- Push notifications require user to set up ntfy.sh app on their phone